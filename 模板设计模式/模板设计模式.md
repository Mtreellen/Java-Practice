### 模板设计模式

**设计模式：解耦，第三方（高内聚，低耦合）**

**开闭原则（OCP）**：一个软件实体类、模块或函数应该**对扩展开放，对修改关闭。**

23种设计模式

```java
class Coffee {
    void prepareRecipe() {
        boilWater();
        brewCoffee();
        pourCooffee();
        addSugerAndMilk();
    }

    void boilWater() {
        System.out.println("将水烧开");
    }

    void brewCoffee() {
        System.out.println("用水冲咖啡");
    }

    void pourCooffee() {
        System.out.println("将咖啡倒入杯子中");
    }

    void addSugerAndMilk() {
        System.out.println("加糖和牛奶");
    }

}

class Tea {
    void prepareRecipe() {
        pourWater();
        steepTeaBag();
        pourInCup();
        addLemon();
    }

    void pourWater() {
        System.out.println("将水烧开");
    }

    void steepTeaBag() {
        System.out.println("用水浸泡茶包");
    }

    void pourInCup() {
        System.out.println("将茶倒入杯子中");
    }

    void addLemon() {
        System.out.println("加入柠檬");
    }
}

public class Test6_27 {
    public static void main(String[] args) {
        Coffee coffee = new Coffee();
        Tea tea = new Tea();
        coffee.prepareRecipe();
        tea.prepareRecipe();
    }
}
```

#### 模板（模板方法）设计模式

​		**在一个方法中**定义一个算法的骨架，而降一些步骤延迟到子类中。

​		模板设计模式可以使得子类在不改变算法的前提下，重新定义算法中的某些步骤。

​		基于抽象类的一种设计模式。

```java
//基类声明必须为抽象类的原因——其子类必须实现其操作
abstract class CaffineBeverage {
    //核心冲泡法
    final void prepareRecipe() {
        boilWater();
        pourInCup();
        brew();
        addCondiments();
    }

    final void boilWater() {
        System.out.println("将水烧开");
    }

    final void pourInCup() {
        System.out.println("将饮品倒入杯子中");
    }

    abstract void brew();
    abstract void addCondiments();
}

class Coffee extends CaffineBeverage {
    void brew() {
        System.out.println("冲泡咖啡");
    }

    void addCondiments() {
        System.out.println("加糖加牛奶");
    }
}

class Tea extends CaffineBeverage {
    void brew() {
        System.out.println("浸泡茶叶");
    }

    void addCondiments() {
        System.out.println("加柠檬");
    }
}

public class Test6_27 {
    public static void main(String[] args) {
        Coffee coffee = new Coffee();
        Tea tea = new Tea();
        coffee.prepareRecipe();
        //tea.prepareRecipe();
    }
}
```

扩展以上的类，实现“钩子”方法

```java
import java.util.Scanner;

abstract class CaffineBeverage {
    //核心冲泡法
    final void prepareRecipe() {
        boilWater();
        pourInCup();
        brew();
        if(customerWantsCondiments()) {
            addCondiments();
        }
    }

    final void boilWater() {
        System.out.println("将水烧开");
    }

    final void pourInCup() {
        System.out.println("将饮品倒入杯子中");
    }

    abstract void brew();
    abstract void addCondiments();

    boolean customerWantsCondiments() {
        return true;
    }
}

class Coffee extends CaffineBeverage {
    void brew() {
        System.out.println("冲泡咖啡");
    }

    void addCondiments() {
        System.out.println("加糖加牛奶");
    }
}

class Tea extends CaffineBeverage {
    void brew() {
        System.out.println("浸泡茶叶");
    }

    void addCondiments() {
        System.out.println("加柠檬");
    }
    
    boolean customerWantsCondiments() {  
        System.out.println("请问您需要柠檬吗？(y or n)");
        String result = getUserInfo();
        if(result.equals("y")) {
            return true;
        }
        return false;
    }
    
    private String getUserInfo() {
        String str = null;
        Scanner scanner = new Scanner(System.in);
        str = scanner.nextLine();
        return str;
    }
}

public class Test6_27 {
    public static void main(String[] args) {
        Coffee coffee = new Coffee();
        Tea tea = new Tea();
        coffee.prepareRecipe();
        tea.prepareRecipe();
    }
}
```



